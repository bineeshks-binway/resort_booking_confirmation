<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Booking Confirmation - Wayanad Fort Resort</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* GLOBAL RESET & PRINT SETTINGS */
        * {
            box-sizing: border-box;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #1f2937;
            font-size: 14px;
            line-height: 1.5;
        }

        @page {
            size: A4;
            margin: 0;
        }

        .page {
            width: 210mm;
            min-height: 297mm;
            position: relative;
            background-color: #f8f9fa;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .page-2 {
            page-break-before: always;
            padding: 25px 40px;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            display: flex;
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .fw-bold {
            font-weight: 700;
        }

        .fw-medium {
            font-weight: 500;
        }

        .text-muted {
            color: #6b7280;
            font-size: 12px;
        }

        .text-green {
            color: #8B3A1C;
        }

        .text-orange {
            color: #e67e22;
        }

        .text-sm {
            font-size: 12px;
        }

        .text-xs {
            font-size: 10px;
        }

        .mt-2 {
            margin-top: 8px;
        }

        .mb-2 {
            margin-bottom: 8px;
        }

        .mt-4 {
            margin-top: 12px;
        }

        .mb-4 {
            margin-bottom: 12px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            page-break-inside: avoid;
        }

        /* HERO */
        .hero {
            background-color: #8B3A1C;
            color: white;
            padding: 40px 40px 80px 40px;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            text-align: center;
            position: relative;
        }

        .logo-container {
            width: auto;
            height: 80px;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .hero h1 {
            font-size: 28px;
            margin: 0;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .hero p {
            margin: 4px 0 0;
            opacity: 0.9;
            font-size: 14px;
        }

        .contact-info {
            margin-top: 16px;
            font-size: 12px;
            opacity: 0.8;
            padding-top: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            width: 60%;
            margin-left: auto;
            margin-right: auto;
        }

        .booking-card {
            margin: -60px 40px 0 40px;
            position: relative;
            z-index: 10;
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 16px;
        }

        .booking-title {
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 1px;
            color: #6b7280;
            text-transform: uppercase;
        }

        .booking-id-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .booking-id {
            font-size: 24px;
            font-weight: 700;
            color: #e67e22;
        }

        .status-badge {
            background-color: #ffede8;
            color: #8B3A1C;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid #ffccbc;
            text-transform: uppercase;
        }

        .status-badge.pending {
            background-color: #fff7ed;
            color: #c2410c;
            border-color: #fed7aa;
        }

        .status-badge.on-hold {
            background-color: #eff6ff;
            color: #1d4ed8;
            border-color: #bfdbfe;
        }

        .room-section {
            margin: 24px 40px;
        }

        .room-image-single {
            width: 100%;
            height: 350px;
            background-color: #eee;
            background-size: cover;
            background-position: center;
            border-radius: 16px;
        }

        .room-caption {
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .room-name {
            font-size: 18px;
            font-weight: 700;
            color: #8B3A1C;
        }

        .room-meta {
            color: #6b7280;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .details-grid {
            margin: 0 40px;
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 20px;
        }

        .detail-group {
            margin-bottom: 16px;
        }

        .detail-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #9ca3af;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 15px;
            font-weight: 600;
            color: #111827;
        }

        .stay-row {
            display: flex;
            justify-content: space-between;
            background: #f3f4f6;
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
        }

        .duration-badge {
            background: #e5e7eb;
            color: #374151;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            align-self: center;
        }

        /* PAGE 2 */
        .section-title {
            font-size: 14px;
            font-weight: 700;
            color: #374151;
            text-transform: uppercase;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 8px;
        }

        .meal-pills {
            display: flex;
            gap: 10px;
        }

        .meal-pill {
            border: 1px solid #8B3A1C;
            color: #8B3A1C;
            background: rgba(139, 58, 28, 0.08);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .payment-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #4b5563;
        }

        .payment-row.total {
            font-size: 16px;
            font-weight: 700;
            color: #111827;
            border-top: 1px dashed #e5e7eb;
            padding-top: 10px;
            margin-top: 10px;
        }

        .payment-row.pending {
            color: #ef4444;
            font-weight: 600;
            background: #fef2f2;
            padding: 8px 12px;
            border-radius: 8px;
            margin-top: 8px;
        }

        .bank-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px 16px;
        }

        .bank-item {
            font-size: 13px;
        }

        .bank-label {
            color: #6b7280;
            font-size: 11px;
        }

        .bank-val {
            font-weight: 500;
            color: #374151;
        }

        .terms-list {
            background: #f9fafb;
            border-radius: 12px;
            padding: 16px;
        }

        .term-item {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 12px;
            color: #4b5563;
        }

        .term-item:last-child {
            margin-bottom: 0;
        }

        .term-icon {
            color: #8B3A1C;
            font-size: 14px;
            min-width: 16px;
        }

        .action-cards {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .action-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s;
        }

        .action-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .action-title {
            font-weight: 600;
            font-size: 12px;
            color: #374151;
            margin-bottom: 4px;
            display: block;
        }

        .action-link {
            font-size: 10px;
            color: #2563eb;
            font-weight: 600;
            text-transform: uppercase;
            text-decoration: underline;
            display: block;
        }

        .footer {
            margin-top: auto;
            border-top: 1px solid #e5e7eb;
            padding-top: 24px;
            text-align: center;
            color: #4b5563;
            font-size: 13px;
            font-weight: 400;
        }

        .footer strong {
            color: #1f2937;
            font-weight: 500;
        }
    </style>
</head>

<body>
    <div class="page">
        <div class="hero">
            <div class="logo-container">
                <% if(logoData) { %> <img src="<%= logoData %>" alt="Wayanad Fort Logo">
                    <% } else { %> <span style="font-weight: bold;">Logo</span>
                        <% } %>
            </div>
            <h1>Wayanad Fort Resort</h1>
            <p>Experience Nature's Luxury , Wayanad</p>
            <div class="contact-info">www.wayanadfort.com &nbsp;|&nbsp; +91 90484 45333 &nbsp;|&nbsp; +91 94468 23881
            </div>
        </div>
        <div class="card booking-card">
            <div class="booking-header">
                <span class="booking-title">
                    <%= pdfTitle %>
                </span>
                <span class="text-muted">
                    <%= new Date().toLocaleDateString('en-GB') %>
                </span>
            </div>
            <div class="booking-id-row">
                <div class="flex-col"><span class="text-xs text-muted">BOOKING ID</span><span class="booking-id">#<%=
                            bookingId %></span></div>
                <div class="status-badge <%= bookingStatus ? bookingStatus.toLowerCase().replace('_', '-') : '' %>">
                    <%= bookingStatus ? bookingStatus.replace('_', ' ' ) : 'CONFIRMED' %>
                </div>
            </div>
        </div>
        <div class="room-section">
            <% let mainImage='' ; if(typeof roomImages !=='undefined' && roomImages.length> 0) {
                mainImage = roomImages[0];
                } else if(typeof roomImageData !== 'undefined') {
                mainImage = roomImageData;
                }
                %>
                <div class="room-image-single" style="background-image: url('<%= mainImage %>');"></div>
                <div class="room-caption">
                    <div class="room-name" style="white-space: normal; line-height: 1.2;">
                        <%= roomType %>
                    </div>
                    <div class="room-meta"
                        style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                        <span style="font-weight: 500; font-size: 13px; color: #6b7280;">Total Rooms: <strong
                                style="color: #374151;">
                                <%= noOfRooms %>
                            </strong></span>
                        <span
                            style="font-weight: 500; font-size: 13px; color: #6b7280; display: inline-flex; align-items: center;">
                            Guests: <strong style="color: #374151; margin-left: 4px;">
                                <% if (typeof guestDetails !=='undefined' && guestDetails && typeof
                                    guestDetails==='object' ) { %>
                                    <%= guestDetails.adults || 0 %> Adults
                                        <% if (guestDetails.children> 0) { %>
                                            + <%= guestDetails.children %> Children
                                                <% } %>
                                                    <% } else { %>
                                                        <%= guests %>
                                                            <% } %>
                            </strong>
                        </span>
                    </div>
                </div>
        </div>
        <div class="details-grid">
            <div class="card">
                <div class="section-title">Guest Details</div>
                <div class="detail-group">
                    <div class="detail-label">MR/MS</div>
                    <div class="detail-value">
                        <%= guestName %>
                    </div>
                </div>
                <div class="detail-group">
                    <div class="detail-label">CONTACT</div>
                    <div class="detail-value">
                        <%= phoneNumber %>
                    </div>
                </div>

            </div>
            <div class="card">
                <div class="section-title">Stay Information</div>
                <div class="stay-row">
                    <div>
                        <div class="detail-label">CHECK-IN</div>
                        <div class="detail-value">
                            <%= new Date(checkIn).toLocaleDateString('en-GB') %>
                        </div>
                        <div class="text-xs text-muted">02:00 PM</div>
                    </div>
                    <div class="duration-badge">
                        <%= noOfNights %> Night(s)
                    </div>
                    <div class="text-right">
                        <div class="detail-label">CHECK-OUT</div>
                        <div class="detail-value">
                            <%= new Date(checkOut).toLocaleDateString('en-GB') %>
                        </div>
                        <div class="text-xs text-muted">11:00 AM</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="page page-2">
        <!-- LOOPS ROOMS HERE -->
        <div class="grid-2 mb-4">
            <div class="card">
                <div class="section-title">Meal Plan</div>
                <div class="meal-pills">
                    <% if (mealPlan && mealPlan !=="None" ) { %>
                        <% mealPlan.split(' | ').forEach(function(plan) { %> <div class="meal-pill"><%= plan %></div> <% }); %>
                    <% } else { %> <div class="text-muted">Room Only (No active meal plan)</div> <% } %>
                </div>
                <div class="mt-2 text-xs text-muted">Buffet breakfast served at 8:00 AM - 10:00 AM.</div>
            </div>
            <div class="card">
                <div class="section-title">Payment Summary</div>
                <!-- <div class="payment-row"><span>Room Charges (<%= noOfRooms %> Room x <%= noOfNights %> Night)</span><span class="fw-bold">Included</span></div> -->
                <!-- Replaced summary line with Total Amount directly since we have the table above -->
                 <div class="payment-row"><span>Total Rooms</span><span class="fw-bold"><%= noOfRooms %></span></div>
                 <div class="payment-row"><span>Total Nights</span><span class="fw-bold"><%= noOfNights %></span></div>
                
                <div class="payment-row total">
                    <span>Grand Total</span>
                    <span>&#8377; <%= priceFormatted %></span>
                </div>
                <div class="payment-row text-green">
                    <span>Advance Paid</span>
                    <span>- &#8377; <%= advanceAmountFormatted %></span>
                </div>
                <div class="payment-row pending">
                    <span>Pending Amount</span>
                    <span>&#8377; <%= pendingAmountFormatted %></span>
                </div>
                <div class="text-xs text-muted mt-2 text-center">*Inclusive of all applicable taxes</div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="section-title">Bank Transfer Details</div>
            <div class="bank-grid">
                <div class="bank-item">
                    <div class="bank-label">BENEFICIARY NAME</div>
                    <div class="bank-val">WAYANAD FORT</div>
                </div>
                <div class="bank-item">
                    <div class="bank-label">BANK NAME</div>
                    <div class="bank-val">AXIS BANK</div>
                </div>
                <div class="bank-item">
                    <div class="bank-label">ACCOUNT NUMBER</div>
                    <div class="bank-val">917020051575330</div>
                </div>
                <div class="bank-item">
                    <div class="bank-label">IFSC CODE</div>
                    <div class="bank-val">UTIB0001099</div>
                </div>
                <div class="bank-item">
                    <div class="bank-label">BRANCH</div>
                    <div class="bank-val">SULTHAN BATHERY</div>
                </div>
                <div class="bank-item">
                    <div class="bank-label">GPAY / PHONEPE</div>
                    <div class="bank-val">+91 94468 23881</div>
                </div>
            </div>
        </div>
        <br>
        <div class="card mb-4">
            <div class="section-title">Terms & Conditions</div>
            <div class="terms-list">
                <div class="term-item">
                    <div class="term-icon">&bull;</div>
                    <div><strong>Advance Payment:</strong> All payments (Cash/NEFT/IMPS/Online) must be completed before
                        the cut-off or check-in time.</div>
                </div>
                <div class="term-item">
                    <div class="term-icon">&bull;</div>
                    <div><strong>Cancellation Policy:</strong> Management reserves the right to cancel reservations
                        under unforeseen circumstances. Refunds subject to policy.</div>
                </div>
                <div class="term-item">
                    <div class="term-icon">&bull;</div>
                    <div><strong>Facility Usage:</strong> Usage of resort facilities will be as per the Hotel and
                        Government rules and regulations.</div>
                </div>
                <div class="term-item">
                    <div class="term-icon">&bull;</div>
                    <div><strong>ID Proof:</strong> As per Govt guidelines, valid address proof (soft copy) is mandatory
                        for Indian citizens. Foreign citizens must provide Passport/Visa/OCI documents.</div>
                </div>
            </div>
        </div>
        <br>
        <div class="action-cards mb-4">
            <a href="https://resort-booking-confirmation.vercel.app/gallery" class="action-card"><span class="action-icon"></span><span
                    class="action-title">View Gallery</span><span class="action-link">More Photos &rarr; Click here</span></a>
            <a href="https://resort-booking-confirmation.vercel.app/sightseeing" class="action-card"><span class="action-icon"></span><span
                    class="action-title">Sightseeing</span><span class="action-link">Explore Wayanad &rarr; Click here</span></a>
            <a href="https://maps.app.goo.gl/ur6zxHXigwetPq74A" class="action-card"><span
                    class="action-icon"></span><span class="action-title">Find Us</span><span class="action-link">View
                    Location &rarr; Click here</span></a>
        </div>
        <div class="footer">
            <div class="mb-2"><strong>Wayanad Fort Resort</strong></div>
            <div class="mb-2">Meppadi, Wayanad, Kerala, 673577</div>
            <div class="mb-2">www.wayanadfort.com &nbsp;|&nbsp; info@wayanadfort.com</div>
            <div class="mb-2">Ph: 90484 45333 &nbsp;|&nbsp; 94468 23881</div>
        </div>
    </div>
</body>

</html>